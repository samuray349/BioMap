<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioMap - Adicionar Animal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/x-icon" href="./img/biomap-icon.png">
    <style>
        .preview-section {
            max-width: 1200px;
            margin: 0 auto 60px;
            padding: 0 20px;
        }

        .preview-section .preview-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .preview-section .preview-header h2 {
            margin: 8px 0 0;
            font-size: 1.8rem;
            color: var(--accent-color);
            margin-top: 3.5rem;
        }

        .preview-section .preview-block {
            margin-bottom: 48px;
        }

        .preview-section .preview-title {
            font-size: 1.25rem;
            margin-bottom: 16px;
            color: var(--text-dark, #1f2937);
        }

        .preview-section .preview-card {
            max-width: 360px;
        }

        .preview-section .animal-card {
            background-color: #ffffff;
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px #1987548c;
            overflow: hidden;
            display: flex;
            flex-direction: row;
            border: 1px solid rgba(0, 0, 0, 0.05);
            align-items: stretch;
        }

        .preview-section .animal-card.main {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto 32px;
        }

        .preview-section .description-preview .animal-card.main {
            transform: scale(0.7);
            transform-origin: center top;
        }

        .preview-section .animal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 13px #1987548c;
        }

        .preview-section .card-image-section {
            width: 65%;
            position: relative;
        }

        .preview-section .card-image-section img {
            width: 100%;
            height: 100%;
            aspect-ratio: 16 / 9;
            object-fit: cover;
            object-position: center;
            display: block;
        }

        .preview-section .card-content-section {
            width: 35%;
            padding: 2.5rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .preview-section .card-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preview-section .animal-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--accent-color, #198754);
            margin: 0;
            line-height: 1.1;
        }

        .preview-section .scientific-name {
            font-style: italic;
            color: #6b7280;
            font-size: 1rem;
            margin-top: 0.25rem;
        }

        .preview-section .status-badge {
            background-color: #ffc107;
            color: #ffffff;
            font-weight: 600;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            box-shadow: 0 2px 5px rgba(255, 193, 7, 0.3);
            white-space: nowrap;
            align-self: flex-start;
        }

        .preview-section .section-title {
            color: var(--accent-color, #198754);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            margin-top: 0;
            text-align: left;
        }

        .preview-section .facts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 1.5rem;
        }

        @media (min-width: 1400px) {
            .preview-section .facts-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .preview-section .fact-label {
            color: var(--accent-color, #198754);
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 2px;
            display: block;
        }

        .preview-section .fact-value {
            color: #1f2937;
            font-weight: 500;
            font-size: 1rem;
        }

        .preview-section .description-text {
            color: #4b5563;
            line-height: 1.6;
            font-size: 0.95rem;
            margin: 0;
        }

        .preview-section .preview-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .preview-section .preview-info-card {
            flex-direction: column;
            padding: 24px;
            height: 100%;
        }

        .preview-section .preview-info-card h3 {
            color: var(--accent-color, #198754);
            margin: 0 0 16px;
        }

        .preview-section .threat-item {
            position: relative;
            padding-left: 20px;
            color: #4b5563;
            margin-bottom: 12px;
            list-style: none;
        }

        .preview-section .threat-item::before {
            content: "";
            position: absolute;
            left: 0;
            top: 8px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #198754;
        }

        .preview-section .conservation-status {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .preview-section .status-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ffcc00;
            color: #1f1f1f;
            font-size: 20px;
        }

        .preview-section .donate-btn {
            margin-top: auto;
            background-color: var(--accent-color, #198754);
            color: #fff;
            border: none;
            border-radius: 999px;
            padding: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .preview-section .preview-fact-card {
            flex-direction: row;
            align-items: flex-start;
            padding: 24px;
            gap: 16px;
        }

        .preview-section .preview-fact-card .status-icon {
            background-color: var(--accent-color, #198754);
            color: #fff;
        }

        .preview-section .preview-share-row {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 16px;
        }

        .preview-section .preview-share-row button {
            border: 1px solid #d1d5db;
            background: #fff;
            border-radius: 999px;
            padding: 6px 18px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        @media (max-width: 900px) {
            .preview-section .animal-card {
                flex-direction: column;
            }

            .preview-section .card-image-section,
            .preview-section .card-content-section {
                width: 100%;
            }

            .preview-section .card-content-section {
                padding: 2rem;
            }
        }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>

    <main class="add-animal-page">
        <section class="add-animal-card">
            <div class="add-animal-header">
                <div>
                    <h1>Adicionar Animal</h1>
                    <p class="subtitle">Preencha todos os campos para publicar um novo animal na plataforma.</p>
                </div>
                <button class="ghost-btn" type="button">
                    <i class="fa-solid fa-rotate"></i>
                    Limpar formul√°rio
                </button>
            </div>

            <form class="add-animal-form">
                <div class="form-grid two-columns">
                    <div class="input-field">
                        <label for="animal-name">Nome Animal</label>
                        <input id="animal-name" type="text" placeholder="Ex: Lince Ib√©rico">
                    </div>
                    <div class="input-field">
                        <label for="scientific-name">Nome Cient√≠fico</label>
                        <input id="scientific-name" type="text" placeholder="Ex: Lynx pardinus">
                    </div>
                </div>

                <section class="add-section taxonomy-section">
                    <div class="section-heading">
                        <h2>Fam√≠lia</h2>
                        <p>Selecione as fam√≠lias e ordens relacionadas com o animal registado.</p>
                    </div>

                    <div class="taxonomy-group">
                        <span class="taxonomy-label">Mam√≠feros</span>
                        <select id="familia-mamiferos" name="familia-mamiferos" class="chip-select" aria-label="Fam√≠lia Mam√≠feros">
                            <option value="">Selecione uma fam√≠lia</option>
                            <option value="Antilocapridae">Antilocapridae</option>
                            <option value="Bovidae">Bovidae</option>
                            <option value="Canidae">Canidae</option>
                            <option value="Camelidae">Camelidae</option>
                            <option value="Cervidae">Cervidae</option>
                            <option value="Dasipodidae">Dasipodidae</option>
                            <option value="Didelphidae">Didelphidae</option>
                            <option value="Felidae">Felidae</option>
                            <option value="Herpestidae">Herpestidae</option>
                            <option value="Hominidae">Hominidae</option>
                            <option value="Leporidae">Leporidae</option>
                            <option value="Megadermatidae">Megadermatidae</option>
                            <option value="Mustelidae">Mustelidae</option>
                            <option value="Otariidae">Otariidae</option>
                            <option value="Phocidae">Phocidae</option>
                            <option value="Procyonidae">Procyonidae</option>
                            <option value="Rodentia">Rodentia</option>
                            <option value="Sciuridae">Sciuridae</option>
                            <option value="Suidae">Suidae</option>
                            <option value="Tapiridae">Tapiridae</option>
                            <option value="Ursidae">Ursidae</option>
                            <option value="Viverridae">Viverridae</option>
                            <option value="Xenarthra">Xenarthra</option>
                        </select>
                    </div>

                    <div class="taxonomy-group">
                        <span class="taxonomy-label">Aves</span>
                        <select id="familia-aves" name="familia-aves" class="chip-select" aria-label="Fam√≠lia Aves">
                            <option value="">Selecione uma fam√≠lia</option>
                            <option value="Accipitridae">Accipitridae</option>
                            <option value="Ardeidae">Ardeidae</option>
                            <option value="Cathartidae">Cathartidae</option>
                            <option value="Columbidae">Columbidae</option>
                            <option value="Falconidae">Falconidae</option>
                            <option value="Phasianidae">Phasianidae</option>
                            <option value="Psittacidae">Psittacidae</option>
                            <option value="Strigidae">Strigidae</option>
                            <option value="Trochilidae">Trochilidae</option>
                            <option value="Tytonidae">Tytonidae</option>
                        </select>
                    </div>

                    <div class="taxonomy-group">
                        <span class="taxonomy-label">R√©pteis e Anf√≠bios</span>
                        <select id="familia-repteis" name="familia-repteis" class="chip-select" aria-label="Fam√≠lia R√©pteis e Anf√≠bios">
                            <option value="">Selecione uma fam√≠lia</option>
                            <option value="Boidae">Boidae</option>
                            <option value="Cheloniidae">Cheloniidae</option>
                            <option value="Crocodylidae">Crocodylidae</option>
                            <option value="Elapidae">Elapidae</option>
                            <option value="Iguanidae">Iguanidae</option>
                            <option value="Viperidae">Viperidae</option>
                            <option value="Bufonidae">Bufonidae</option>
                            <option value="Hylidae">Hylidae</option>
                            <option value="Ranidae">Ranidae</option>
                            <option value="Testudinidae">Testudinidae</option>
                        </select>
                    </div>

                    <div class="taxonomy-group">
                        <span class="taxonomy-label">Peixes</span>
                        <select id="familia-peixes" name="familia-peixes" class="chip-select" aria-label="Fam√≠lia Peixes">
                            <option value="">Selecione uma fam√≠lia</option>
                            <option value="Cyprinidae">Cyprinidae</option>
                            <option value="Characidae">Characidae</option>
                            <option value="Cichlidae">Cichlidae</option>
                            <option value="Serranidae">Serranidae</option>
                            <option value="Siluridae">Siluridae</option>
                        </select>
                    </div>
                </section>

                <section class="add-section diet-section">
                    <div class="section-heading">
                        <h2>Dietas</h2>
                        <p>Identifique a dieta predominante do animal.</p>
                    </div>
                    <select id="diet-type" name="diet-type" class="chip-select" aria-label="Dieta">
                        <option value="">Selecione a dieta</option>
                        <option value="Carn√≠voro">Carn√≠voro</option>
                        <option value="Herb√≠voro">Herb√≠voro</option>
                        <option value="Omn√≠voro">Omn√≠voro</option>
                    </select>
                </section>

                <section class="add-section threats-section">
                    <div class="section-heading">
                        <h2>Amea√ßas</h2>
                        <p>Registe at√© cinco amea√ßas principais e o estado de conserva√ß√£o atual.</p>
                    </div>
                    <div class="form-grid two-columns">
                        <div class="input-field">
                            <label for="threat-1">Amea√ßa 1</label>
                            <input id="threat-1" type="text" placeholder="Desfloresta√ß√£o, ca√ßa ilegal...">
                        </div>
                        <div class="input-field">
                            <label for="threat-2">Amea√ßa 2</label>
                            <input id="threat-2" type="text">
                        </div>
                        <div class="input-field">
                            <label for="threat-3">Amea√ßa 3</label>
                            <input id="threat-3" type="text">
                        </div>
                        <div class="input-field">
                            <label for="threat-4">Amea√ßa 4</label>
                            <input id="threat-4" type="text">
                        </div>
                        <div class="input-field">
                            <label for="threat-5">Amea√ßa 5</label>
                            <input id="threat-5" type="text">
                        </div>
                    </div>
                    <select id="conservation-status" name="conservation-status" class="chip-select conservation-row" aria-label="Estado de conserva√ß√£o"
                        onchange="updateConservationBgColor(this)">
                        <option value="">Selecione o estado de conserva√ß√£o</option>
                        <option value="Quase amea√ßada">Quase amea√ßada</option>
                        <option value="Vulner√°vel">Vulner√°vel</option>
                        <option value="Em perigo">Em perigo</option>
                        <option value="Perigo cr√≠tico">Perigo cr√≠tico</option>
                        <option value="Extinto na Natureza">Extinto na Natureza</option>
                    </select>
                    <script>
                        function updateConservationBgColor(select) {
                            const colorMap = {
                                "": "#d9dee7",
                                "Quase amea√ßada": "#e0faac",
                                "Vulner√°vel": "#ffd7a0",
                                "Em perigo": "#faa973",
                                "Perigo cr√≠tico": "#fa7878",
                                "Extinto na Natureza": "#828282"
                            };
                            const accentColorMap = {
                                "": "#6e7a85", // fallback gray
                                "Quase amea√ßada": "#598d13",
                                "Vulner√°vel": "#ff9100",
                                "Em perigo": "#df540a",
                                "Perigo cr√≠tico": "#c60a0a",
                                "Extinto na Natureza": "#222326"
                            };
                            // Set background color
                            select.style.backgroundColor = colorMap[select.value] || "#d9dee7";
                            // Set accent color for modern browsers (will affect the dropdown highlight, focus ring, etc.)
                            select.style.setProperty('accent-color', accentColorMap[select.value] || "#6e7a85");
                            // For extra visual hint, also update border color if desired:
                            select.style.borderColor = accentColorMap[select.value] || "#6e7a85";
                            // Optionally set color for font if dark background
                            if(select.value === "Perigo cr√≠tico" || select.value === "Extinto na Natureza") {
                                select.style.color = "#fff";
                            } else {
                                select.style.color = "#222326";
                            }
                        }
                        // Initialize background and accent color on DOM load for pre-selected values (editing scenarios)
                        document.addEventListener("DOMContentLoaded", function() {
                            var select = document.getElementById('conservation-status');
                            updateConservationBgColor(select);
                        });
                    </script>
                </section>

                <section class="add-section quick-stats">
                    <div class="form-grid two-columns">
                        <div class="input-field">
                            <label for="population">Popula√ß√£o Estimada</label>
                            <input id="population" type="text" placeholder="Ex: 1 200 indiv√≠duos">
                        </div>
                        <div class="input-field">
                            <label for="fact">Facto</label>
                            <input id="fact" type="text" placeholder="Curiosidade ou facto relevante">
                        </div>
                    </div>
                </section>

                <section class="add-section description-section">
                    <div class="section-heading">
                        <h2>Descri√ß√£o detalhada</h2>
                        <p>Conte a hist√≥ria, comportamento e habitat do animal.</p>
                    </div>
                    <div class="description-editor">
                        <div class="editor-toolbar">
                            <button type="button" aria-label="Undo"><i class="fa-solid fa-rotate-left"></i></button>
                            <button type="button" aria-label="Redo"><i class="fa-solid fa-rotate-right"></i></button>
                            <span class="divider"></span>
                            <button type="button"><i class="fa-solid fa-bold"></i></button>
                            <button type="button"><i class="fa-solid fa-italic"></i></button>
                            <button type="button"><i class="fa-solid fa-underline"></i></button>
                            <button type="button"><i class="fa-solid fa-list-ul"></i></button>
                            <button type="button"><i class="fa-solid fa-list-ol"></i></button>
                            <button type="button"><i class="fa-solid fa-link"></i></button>
                            <button type="button"><i class="fa-solid fa-quote-right"></i></button>
                            <button type="button"><i class="fa-solid fa-image"></i></button>
                        </div>
                        <label for="description">Descri√ß√£o</label>
                        <textarea id="description" rows="8" placeholder="Conte a hist√≥ria do animal, habitat, comportamento e outros detalhes importantes..."></textarea>
                    </div>
                </section>

                <section class="add-section image-upload-section">
                    <div class="section-heading">
                        <h2>Adicionar imagem</h2>
                        <p>Utilize fotografias horizontais com boa resolu√ß√£o (1200px x 800px recomendado).</p>
                    </div>
                    <div class="image-upload">
                        <div class="image-upload-body">
                            <label class="upload-box" for="image-input">
                                <div class="upload-instructions">
                                    <i class="fa-solid fa-cloud-arrow-up"></i>
                                    <p>Arraste e solte a imagem aqui ou <span>clique para fazer upload</span></p>
                                    <small>Formatos aceites: JPG ou PNG at√© 5MB</small>
                                </div>
                                <input type="file" id="image-input" accept="image/*">
                            </label>
                            <figure class="image-preview">
                                <img src="img/lince-login.jpeg" alt="Pr√©-visualiza√ß√£o do animal">
                                <figcaption>Imagem de exemplo</figcaption>
                            </figure>
                        </div>
                    </div>
                </section>

                <div class="form-actions add-section">
                    <button type="submit" class="primary-btn">
                        <i class="fa-solid fa-paw"></i>
                        Adicionar Animal
                    </button>
                </div>
            </form>
        </section>
        
            <section class="preview-section">
                <div class="preview-header">
                    <h2>Veja como o animal aparecer√° na plataforma</h2>
                </div>
    
                <div class="preview-block">
                    <h3 class="preview-title">Miniatura</h3>
                    <div class="card green-shadow preview-card">
                        <img src="https://t4.ftcdn.net/jpg/10/64/99/85/360_F_1064998553_4RvqeSWINhkKJEyVLzidd8bUKtOV7hIc.jpg" alt="Lince ib√©rico" class="card-image">
                        <div class="card-content">
                            <div class="card-header">
                                <h3>Lince ib√©rico</h3>
                                <span class="badge vulnerable">Vulner√°vel</span>
                            </div>
                            <div class="family">
                                <span class="family-icon"><i class="fa-solid fa-people-group"></i></span>
                                <span>Fel√≠deos</span>
                            </div>
                            <p class="description">O lince-ib√©rico √© um felino de tamanho m√©dio, oriundo da Pen√≠nsula Ib√©rica...</p>
                            <a href="animal_desc.html" class="btn-details">
                                <span>üëÅ</span> Ver detalhes
                            </a>
                        </div>
                    </div>
                </div>
    
                <div class="preview-block">
                    <h3 class="preview-title">Descri√ß√£o</h3>
                    <div class="preview-share-row">
                        <button type="button">Partilhar</button>
                    </div>
                    <div class="animal-card main">
                        <div class="card-image-section">
                            <img src="./img/lince.jpg" alt="Lince Ib√©rico">
                        </div>
    
                        <div class="card-content-section">
                            <div class="card-header-row">
                                <div>
                                    <h1 class="animal-title">Lince Ib√©rico</h1>
                                    <p class="scientific-name">Lynx pardinus</p>
                                </div>
                                <span class="status-badge">Vulner√°vel</span>
                            </div>
    
                            <div class="mb-6">
                                <h3 class="section-title">Factos</h3>
                                <div class="facts-grid">
                                    <div>
                                        <span class="fact-label">Fam√≠lia:</span>
                                        <span class="fact-value">Felidae</span>
                                    </div>
                                    <div>
                                        <span class="fact-label">Dieta:</span>
                                        <span class="fact-value">Carn√≠voro</span>
                                    </div>
                                </div>
                            </div>
    
                            <div>
                                <h3 class="section-title">Descri√ß√£o</h3>
                                <p class="description-text">O lince-ib√©rico √© um felino de m√©dio porte end√™mico da Pen√≠nsula Ib√©rica, considerado o felino mais amea√ßado do mundo at√© recentemente. Reconhecido pelas suas orelhas pontiagudas com tufos pretos, patas longas, cauda curta e o caracter√≠stico ‚Äúbarbicho‚Äù facial, o lince-ib√©rico √© um predador √°gil e solit√°rio, perfeitamente adaptado aos ecossistemas mediterr√¢nicos.</p>
                            </div>
                        </div>
                    </div>
    
                    <div class="preview-details-grid">
                        <div class="animal-card preview-info-card">
                            <h3>5 Principais Amea√ßas</h3>
                            <ul style="padding:0; margin:0;">
                                <li class="threat-item">Perda e fragmenta√ß√£o do habitat devido √† urbaniza√ß√£o</li>
                                <li class="threat-item">Redu√ß√£o das popula√ß√µes das suas presas por doen√ßas</li>
                                <li class="threat-item">Atropelamentos em estradas</li>
                                <li class="threat-item">Ca√ßa ilegal e armadilhas destinadas a outros animais</li>
                                <li class="threat-item">Mudan√ßas clim√°ticas que afetam presas e habitat</li>
                            </ul>
                        </div>
                        <div class="animal-card preview-info-card">
                            <h3>Estado de Conserva√ß√£o</h3>
                            <div class="conservation-status">
                                <div class="status-icon">
                                    <i class="fa-solid fa-triangle-exclamation"></i>
                                </div>
                                <div>
                                    <p class="text-gray-500 text-sm" style="margin:0;">Lista Vermelha IUCN</p>
                                    <p class="font-medium" style="margin:0;">Vulner√°vel</p>
                                    <p class="text-gray-700" style="margin:8px 0 0;">Popula√ß√£o estimada: 4.000-6.500 indiv√≠duos.</p>
                                </div>
                            </div>
                            <button class="donate-btn" type="button">
                                <i class="fa-solid fa-heart"></i> Doar
                            </button>
                        </div>
                    </div>
    
                    <div class="animal-card preview-fact-card" style="margin-top: 2rem;">
                        <div class="status-icon">
                            <i class="fa-solid fa-circle-info"></i>
                        </div>
                        <div>
                            <h3 style="margin:0 0 8px;">Facto interessante</h3>
                            <p style="margin:0;">Nos anos 2000, restavam menos de 100 indiv√≠duos ‚Äî √† beira da extin√ß√£o. Gra√ßas a programas de reprodu√ß√£o e prote√ß√£o de habitat, hoje existem mais de 2.000 linces ib√©ricos livres na Pen√≠nsula Ib√©rica.</p>
                        </div>
                    </div>
                </div>
            </section>
    </main>

    <script src="js/script.js"></script>
    <script>
        loadHeader();
        highlightCurrentPage();
    </script>
</body>
</html>

